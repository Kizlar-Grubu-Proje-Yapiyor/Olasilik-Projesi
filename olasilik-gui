#!/bin/bash
# Author: Ceyhun Sen
# Olasilik projesi icin gui arayuzudur.
# Whiptail paketinin yuklu olması zorunludur.

WINDOW_HEIGHT=20
WINDOW_WIDTH=100

main()
{
	make build
	while [ 1 ]
	do
		SECIM=$(whiptail --title "Olasılık ve İstatistik" \
		--ok-button "Seç" --cancel-button "Çıkış" \
		--menu "Seçeneklerden birini seçiniz" \
		${WINDOW_HEIGHT} ${WINDOW_WIDTH} 3>&1 1>&2 2>&3 6 \
		"1" "Aritmetik Ortalama" \
		"2" "Medyan" \
		"3" "Mod" \
		"4" "Harmonik Ortalama" \
		"5" "Ortalama Sapma" \
		"6" "Geometrik Ortalama" \
		)
		
		if [ $? = 1 ]
		then
			break
		fi

		# Aritmetik Ortalama
		if [ ${SECIM} -eq 1 ]
		then
			sayi_al

			if [ $? = 1 ]
			then
				continue
			fi

			CEVAP=$(./olasilik -d "whiptail-girdi.txt" --aritmetik-ortalama)

			whiptail --msgbox "Cevabınız: ${CEVAP}" ${WINDOW_HEIGHT} \
			${WINDOW_WIDTH} --title "Aritmetik Ortalama" 3>&1 1>&2 2>&3

		# Medyan
		elif [ ${SECIM} -eq 2 ]
		then
			sayi_al

			if [ $? = 1 ]
			then
				continue
			fi

			CEVAP=$(./olasilik -d "whiptail-girdi.txt" --medyan)

			whiptail --msgbox "Cevabınız: ${CEVAP}" ${WINDOW_HEIGHT} \
			${WINDOW_WIDTH} --title "Medyan" 3>&1 1>&2 2>&3

		# Mod
		elif [ ${SECIM} -eq 3 ]
		then
			sayi_al

			if [ $? = 1 ]
			then
				continue
			fi

			CEVAP=$(./olasilik -d "whiptail-girdi.txt" --mod)

			whiptail --msgbox "Cevabınız: ${CEVAP}" ${WINDOW_HEIGHT} \
			${WINDOW_WIDTH} --title "Mod" 3>&1 1>&2 2>&3

		# Harmonik Ortalama
		elif [ ${SECIM} -eq 4 ]
		then
			sayi_al

			if [ $? = 1 ]
			then
				continue
			fi

			CEVAP=$(./olasilik -d "whiptail-girdi.txt" --harmonik-ortalama)

			whiptail --msgbox "Cevabınız: ${CEVAP}" ${WINDOW_HEIGHT} \
			${WINDOW_WIDTH} --title "Harmonik Ortalama" 3>&1 1>&2 2>&3

		# Ortalama Sapma
		elif [ ${SECIM} -eq 5 ]
		then
			sayi_al

			if [ $? = 1 ]
			then
				continue
			fi

			CEVAP=$(./olasilik -d "whiptail-girdi.txt" --ortalama-sapma)

			whiptail --msgbox "Cevabınız: ${CEVAP}" ${WINDOW_HEIGHT} \
			${WINDOW_WIDTH} --title "Ortalama Sapma" 3>&1 1>&2 2>&3

		# Ortalama Sapma
		elif [ ${SECIM} -eq 6 ]
		then
			sayi_al

			if [ $? = 1 ]
			then
				continue
			fi

			CEVAP=$(./olasilik -d "whiptail-girdi.txt" --geometrik-ortalama)

			whiptail --msgbox "Cevabınız: ${CEVAP}" ${WINDOW_HEIGHT} \
			${WINDOW_WIDTH} --title "Geometrik Ortalama" 3>&1 1>&2 2>&3
		fi
	done
}

sayi_al()
{
	DIZI=$(whiptail --inputbox "Hesaplamak istediğiniz diziyi girin" \
	     ${WINDOW_HEIGHT} ${WINDOW_WIDTH} --title "Dizi girin:" \
	     --ok-button "Hesapla" --cancel-button "Vazgeç" \
         3>&1 1>&2 2>&3)
	echo ${DIZI[@]} > "whiptail-girdi.txt"
}

main
